#summary Установка и настройка

= Установка =

  * Пакет устанавливается в директорию */usr/local/etc/translate*:
{{{
mkdir -p /usr/local/etc/translate
cd /usr/local/etc/translate
}}}

  _Или_, если объем доступного места в */usr/local/etc* на плеере не позволяет этого сделать, то можно создать символическую ссылку с именем */usr/local/etc/translate* на реальное расположение файлов (например, если /home это ext3 раздел диска):
{{{
mkdir -p /home/translate
cd /home/translate
ln -s /home/translate /usr/local/etc/translate 
}}}

  * Загружаем и распаковываем текущую версию пакета:
{{{
wget -O /tmp/mt.tar.bz2 http://media-translate.googlecode.com/files/rss_ex_2.0.6.tar.bz2
tar -xjf /tmp/mt.tar.bz2
rm /tmp/mt.tar.bz2
}}}

  * Копируем в домашнюю директорию http-сервера на плеере содержимое директории */usr/local/etc/translate/www*:
{{{
cp -rf /usr/local/etc/translate/www /tmp_orig
cp -rf /usr/local/etc/translate/www /tmp
}}}

  _Замечание._ Перед модификацией */tmp_orig*, на плеере требуется разрешить запись в корень файловой системы (этот способ подходит только для прошивок с незащищенным от записи корневым разделом):
{{{
mount -o remount,rw /
}}}

  _Замечание_. На некоторых прошивках домашняя директория встроенного http-сервера может находится в */usr/local/etc/www*.

  * В завершении добавляем дополнительный пункт в меню с интернет-сервисами:
{{{
<item>
  <title>Дополнительные сервисы</title>
  <link>rss_file://./rss/menuEx.rss</link>
  <media:thumbnail url="rss/image/menuEx.png" width="120" height="90" />
  <mediaDisplay name=photoView />
</item>
}}}

  Пункт меню следует добавить в файл */usr/local/etc/dvdplayer/savedrss/scripts/menu.rss*, если такого файла не существует, то его следует скопировать из */usr/local/bin/scripts/menu.rss*:
{{{
mkdir -p /usr/local/etc/dvdplayer/savedrss/scripts
cp -n /usr/local/bin/scripts/menu.rss /usr/local/etc/dvdplayer/savedrss/scripts/menu.rss
}}}

_Замечание._ Для работы с некоторыми online-сервисами ([http://ivi.ru IVI.ru]) дополнительно требуется установить [http://curl.haxx.se/ CURL].

= Настройка =

  * Основной конфигурационный файл */usr/local/etc/translate/etc/translate.conf*:
{{{
BASEPATH=/usr/local/etc/translate
export AWKPATH=$BASEPATH/lib:.

WGET=/usr/bin/wget
CURL=/usr/local/bin/curl

STARTPOINT=$BASEPATH/etc/index.m3u
XSPFSCAN=$BASEPATH/etc/xspf.scan
MAINMENU=$BASEPATH/etc/menu/main.xspf

CACHEPATH=/tmp/cached

YOUTUBE_HD=yes
VIMEO_HD=yes
IVI_HD=yes
TVIGLE_HD=yes
NET_BANDWIDTH=

UDPXY_URL=http://127.0.0.1:8080/

TRANSLATE_CGI=`sed -n '1p' $BASEPATH/etc/cgi.conf`
}}}

  Управление HD контентом для Youtube, Vimeo, Tvigle и IVI осуществляется с помощью переменных YOUTUBE_HD, VIMEO_HD, TVIGLE_HD и IVI_HD соответственно. 
  По умолчанию используется HD качество.

  TRANSLATE_CGI содержит путь к CGI-модулю translate. По умолчанию берется из файла cgi.conf.

  * Файл с настройкой пути к CGI-модулю translate */usr/local/etc/translate/etc/cgi.conf* для RSS-модулей:
{{{
http://127.0.0.1/cgi-bin/translate?
}}}

  * Стартовый файл для XSPF Browser */usr/local/etc/translate/etc/index.m3u*:
{{{
#EXTM3U
#EXTINF:-1,Плеер HDD
/var/hdd/volumes/
#EXTINF:-1,Плеер USB
/var/ramfs/volumes/
#EXTINF:-1,Плеер Playlists
/usr/local/etc/playlist/
#EXTINF:-1,Плеер FTP
ftp://127.0.0.1/
}}}

_Замечание._ Все пути к директориям в плейлистах должны заканчиваться символом '/'.